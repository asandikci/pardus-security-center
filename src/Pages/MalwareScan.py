import gi

gi.require_version("Gtk", "4.0")
gi.require_version("Adw", "1")
from libpardus import Ptk
from gi.repository import Gtk, Adw
from locale import gettext as _


class Menu(Ptk.ScrolledWindow):
    def __init__(self, *args, **kwargs):
        super().__init__(*args, **kwargs)

        self.daemon_management()

        self.set_scan_ui()

    def daemon_management(self):
        pass

    def set_scan_ui(self):
        self.scan_preferences = Adw.PreferencesGroup(margin_start=50, margin_end=50, margin_top=20)
        self.scan_preferences.set_title(_("Start Scanning"))
        self.scan_preferences.set_description(_("Start malware scanning with ClamAV"))

        self.complete_scan(self.scan_preferences)  

        self.custom_scan(self.scan_preferences)

        self.realtime_scan(self.scan_preferences)

        self.set_child(self.scan_preferences)

    def complete_scan(self, parent):
        self.complete_scan_box = Adw.ActionRow(valign="GTK_ALIGN_START")
        self.complete_scan_box.set_title(_("Complete Scan"))
        self.complete_scan_box.set_subtitle(_("Scan user directory completely (It might take a while)"))

        parent.add(self.complete_scan_box)

    def custom_scan(self, parent):
        self.custom_scan_box = Adw.ActionRow(valign="GTK_ALIGN_START")
        self.custom_scan_box.set_title(_("Custom Scan"))
        self.custom_scan_box.set_subtitle(_("Scan a folder or directory"))
        self.custom_scan_box.add_suffix(Adw.SplitButton(label=_("File"), icon_name="document-open-symbolic"))
        
        parent.add(self.custom_scan_box)

    def realtime_scan(self, parent):
        self.realtime_scan_box = Adw.SwitchRow(valign="GTK_ALIGN_START")
        self.realtime_scan_box.set_title(_("Realtime Scan"))
        self.realtime_scan_box.set_subtitle(_("Activate/deactivate realtime scan"))

        parent.add(self.realtime_scan_box)

        
